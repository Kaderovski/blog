<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>Online servers availability - Archie</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="We need servers at Online, but there is no availability! So they came to ask me if I didn&rsquo;t have a magic solution&mldr;
A little bash&mldr; a notify in this case Slack and here we go!
As usual sources are available.
Dirty way *To be alerted via slack you have to create an incoming-webhook which will generate a link.
For an XC 2016 series server:
text=&#34;DISPO : https://www.online.net/fr/serveur-dedie/dedibox-xc&#34;; json=&#34;{\&#34;channel\&#34;: \&#34;#infra\&#34;, \&#34;text\&#34;: \&#34;$text\&#34;}&#34; ; while true ; do curl --silent https://www.">
<meta property="og:image" content>
<meta property="og:title" content="Online servers availability">
<meta property="og:description" content="We need servers at Online, but there is no availability! So they came to ask me if I didn&rsquo;t have a magic solution&mldr;
A little bash&mldr; a notify in this case Slack and here we go!
As usual sources are available.
Dirty way *To be alerted via slack you have to create an incoming-webhook which will generate a link.
For an XC 2016 series server:
text=&#34;DISPO : https://www.online.net/fr/serveur-dedie/dedibox-xc&#34;; json=&#34;{\&#34;channel\&#34;: \&#34;#infra\&#34;, \&#34;text\&#34;: \&#34;$text\&#34;}&#34; ; while true ; do curl --silent https://www.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kaderovski.com/posts/online-servers/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-08-01T09:40:07+00:00">
<meta property="article:modified_time" content="2017-08-01T09:40:07+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Online servers availability">
<meta name=twitter:description content="We need servers at Online, but there is no availability! So they came to ask me if I didn&rsquo;t have a magic solution&mldr;
A little bash&mldr; a notify in this case Slack and here we go!
As usual sources are available.
Dirty way *To be alerted via slack you have to create an incoming-webhook which will generate a link.
For an XC 2016 series server:
text=&#34;DISPO : https://www.online.net/fr/serveur-dedie/dedibox-xc&#34;; json=&#34;{\&#34;channel\&#34;: \&#34;#infra\&#34;, \&#34;text\&#34;: \&#34;$text\&#34;}&#34; ; while true ; do curl --silent https://www.">
<script src=https://kaderovski.comjs/feather.min.js></script>
<link href=https://kaderovski.com/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://kaderovski.com/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css>
<link id=darkModeStyle rel=stylesheet type=text/css href=https://kaderovski.com/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css media="(prefers-color-scheme: dark)">
</head><body>
<div class=content><header>
<div class=main>
<a href=https://kaderovski.com>Archie</a>
</div><nav>
<a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a>
</nav></header><main>
<article>
<div class=title>
<h1 class=title>Online servers availability</h1><div class=meta>Posted on Aug 1, 2017</div></div><section class=body>
<p>We need servers at Online, but there is no availability!
So they came to ask me if I didn&rsquo;t have a magic solution&mldr;</p><p>A little <code>bash</code>&mldr; a <code>notify</code> in this case <code>Slack</code> and here we go!<br>
As usual <a href=https://github.com/Kaderovski/OnlineSrvDispo>sources are available</a>.</p><h4 id=dirty-way>Dirty way</h4><p>*To be alerted via slack you have to create an <a href=https://my.slack.com/services/new/incoming-webhook/>incoming-webhook</a> which will generate a link.</p><p>For an XC 2016 series server:</p><pre><code>text=&quot;DISPO : https://www.online.net/fr/serveur-dedie/dedibox-xc&quot;; json=&quot;{\&quot;channel\&quot;: \&quot;#infra\&quot;, \&quot;text\&quot;: \&quot;$text\&quot;}&quot; ; while true ; do curl --silent https://www.online.net/fr/serveur-dedie  | grep '&lt;button class=&quot;btn btn--primary js-order-dedibox&quot;' | grep -i 'xc 2016' | grep -i 'victime' || curl -s -d &quot;payload=$json&quot; &quot;https://hooks.slack.com/services/XXX/XXXX/XXXX/XXXX&quot; ; sleep 5 ; done 
</code></pre><p>Curl will be done only if one server is available.</p><h4 id=clean-way>Clean way</h4><p>Just code formating :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>webhook<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://hooks.slack.com/services/XXX/XXXX/XXXX/XXXX&#34;</span>
</span></span><span style=display:flex><span>url<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://www.online.net/fr/serveur-dedie/XXXXX&#34;</span>
</span></span><span style=display:flex><span>text<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;DISPO : </span>$url<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>channel<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;test&#34;</span>
</span></span><span style=display:flex><span>json<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{\&#34;channel\&#34;: \&#34;#</span>$channel<span style=color:#e6db74>\&#34;, \&#34;text\&#34;: \&#34;</span>$text<span style=color:#e6db74>\&#34;}&#34;</span>
</span></span><span style=display:flex><span>server<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;XC 2016&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> true
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>do</span> curl --silent https://www.online.net/fr/serveur-dedie | <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    grep <span style=color:#e6db74>&#39;&lt;button class=&#34;btn btn--primary js-order-dedibox&#34;&#39;</span> | <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    grep -i <span style=color:#e6db74>&#34;</span>$server<span style=color:#e6db74>&#34;</span> | grep -i <span style=color:#e6db74>&#39;victime&#39;</span> <span style=color:#f92672>||</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    curl -s -d <span style=color:#e6db74>&#34;payload=</span>$json<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$webhook<span style=color:#e6db74>&#34;</span> ; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    sleep <span style=color:#ae81ff>5</span> ; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>You can also push the vice further by filtering on the <strong>region</strong> and the <strong>disc types</strong>.</p><h4 id=pig-mode>Pig mode</h4><p>Because&mldr; why not ?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>text=&#34;DISPO https://www.online.net/fr/serveur-dedie/dedibox-xc&#34;; json=&#34;{\&#34;channel\&#34;: \&#34;#test\&#34;, \&#34;text\&#34;: \&#34;$text\&#34;}&#34; ; while true ; do curl --silent https://www.online.net/fr/serveur-dedie/dedibox-xc | egrep -io &#39;&lt;option value=&#34;\w+&#34;&gt;ssd / france / dc2&lt;/option&gt;&#39; &amp;&amp; curl -s -d &#34;payload=$json&#34; &#34;https://hooks.slack.com/services/XXX/XXXX/XXXX&#34; ; sleep 5 ; done
</span></span></code></pre></div><p>Next step, simulate an order ?</p></section><div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/bash>bash</a></li><li><a href=/tags/online>online</a></li><li><a href=/tags/serveur>serveur</a></li><li><a href=/tags/linux>linux</a></li></ul></nav></div></article></main><footer>
<div style=display:flex><a class=soc href=https://github.com/athul/archie title=GitHub><i data-feather=github></i></a><a class=soc href=https://twitter.com/athulcajay/ title=Twitter><i data-feather=twitter></i></a><a class=soc href=https://gitlab.com/athul/ title=GitLab><i data-feather=gitlab></i></a></div><div class=footer-info>
2022 Â© Athul | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</div></footer><script>feather.replace()</script></div></body></html>