<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>Galera Monitoring - Kaderovski</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Monitoring a database in standalone mode is one thing, but when it comes to clustering, it&rsquo;s a little more complex.
This is the case with Galera clustering (mariaDB/mysql). Zabbix (&co) offered me simple solutions for single database servers, but I didn&rsquo;t find a really interesting template for monitoring a Galera cluster for production.
So several questions, what to monitor, how to alert, what&rsquo;s the best method?
I based myself on the official Galera documentation to have all the important elements to monitor.">
<meta property="og:image" content>
<meta property="og:title" content="Galera Monitoring">
<meta property="og:description" content="Monitoring a database in standalone mode is one thing, but when it comes to clustering, it&rsquo;s a little more complex.
This is the case with Galera clustering (mariaDB/mysql). Zabbix (&co) offered me simple solutions for single database servers, but I didn&rsquo;t find a really interesting template for monitoring a Galera cluster for production.
So several questions, what to monitor, how to alert, what&rsquo;s the best method?
I based myself on the official Galera documentation to have all the important elements to monitor.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kaderovski.com/posts/galera-monitoring/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-07-30T15:08:41+00:00">
<meta property="article:modified_time" content="2017-07-30T15:08:41+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Galera Monitoring">
<meta name=twitter:description content="Monitoring a database in standalone mode is one thing, but when it comes to clustering, it&rsquo;s a little more complex.
This is the case with Galera clustering (mariaDB/mysql). Zabbix (&co) offered me simple solutions for single database servers, but I didn&rsquo;t find a really interesting template for monitoring a Galera cluster for production.
So several questions, what to monitor, how to alert, what&rsquo;s the best method?
I based myself on the official Galera documentation to have all the important elements to monitor.">
<script src=https://kaderovski.com/js/feather.min.js></script>
<link href=https://kaderovski.com/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://kaderovski.com/css/main.012e5aa5cb264fd430bd3ad5b7db828508ccc0fc66b280031de12b7eec06ef85.css>
</head><body>
<div class=content><header>
<div class=main>
<a href=https://kaderovski.com>Kaderovski</a>
</div><nav>
<a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/about>About</a>
<a href=https://photos.kaderovski.com>Photos</a>
<a href=/cv>CV</a>
</nav></header><main>
<article>
<div class=title>
<h1 class=title>Galera Monitoring</h1><div class=meta>Posted on Jul 30, 2017</div></div><section class=body>
<p>Monitoring a database in standalone mode is one thing, but when it comes to clustering, it&rsquo;s a little more complex.</p><p>This is the case with Galera clustering (mariaDB/mysql). Zabbix (&co) offered me simple solutions for single database servers, but I didn&rsquo;t find a really interesting template for monitoring a Galera cluster for production.</p><p>So several questions, what to monitor, how to alert, what&rsquo;s the best method?</p><p>I based myself on <a href=http://galeracluster.com/documentation-webpages/monitoringthecluster.html>the official Galera documentation</a> to have all the important elements to monitor.
For the choice of the Golang language, it seemed to me that it provided me with the necessary functionalities.
As for the choice of alerting, I decided to use a Slack App.</p><p>You can find the <a href=https://github.com/Kaderovski/GaleraMonitoring>sources of my project here</a>.</p><p>Example of a healthy output :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&gt; go run main.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### Version ####
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Serveur n1 - version 5.6.35-1xenial
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Serveur n2 - version 5.6.35-1xenial
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Serveur n3 - version 5.6.35-1xenial
</span></span><span style=display:flex><span>### UUID ###
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n1 a1c404a9-51b4-11e7-b057-237cc5970d38
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n2 a1c404a9-51b4-11e7-b057-237cc5970d38
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n3 a1c404a9-51b4-11e7-b057-237cc5970d38
</span></span><span style=display:flex><span>### Nodes ###
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Total Nodes : 3
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Number of Nodes counts : 3
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Number of Nodes counts : 3
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Number of Nodes counts : 3
</span></span><span style=display:flex><span>### STATUS ###
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n1 status : Primary
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n2 status : Primary
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n3 status : Primary
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n1 is ready : [ON]
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n2 is ready : [ON]
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n3 is ready : [ON]
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n1 is connected : [ON]
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n2 is connected : [ON]
</span></span><span style=display:flex><span>2017/06/16 14:19:48 n3 is connected : [ON]
</span></span><span style=display:flex><span>### Average Replication ###
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Average on n2 : 0.000000
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Average on n3 : 0.000000
</span></span><span style=display:flex><span>2017/06/16 14:19:48 Average on n1 : 0.100000
</span></span></code></pre></div><p>You have to use the <code>slackApp</code> package in which I placed an exposed function <code>PayloadSlack()</code> to then customize your alerts.</p><p>The whole output is not displayed in the <strong>STDOUT</strong> when it is healthy. Nevertheless you just have to uncomment the println in the <code>main.go</code> to be able to perform your tests.</p></section><div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/galera>galera</a></li><li><a href=/tags/monitoring>monitoring</a></li><li><a href=/tags/golang>golang</a></li><li><a href=/tags/dev>dev</a></li></ul></nav></div></article></main><footer>
<div style=display:flex><a class=soc href=https://github.com/corentinderet title=GitHub><i data-feather=github></i></a><a class=soc href=https://gitlab.com/f00b4rch title=GitLab><i data-feather=gitlab></i></a></div><div class=footer-info>
2022 Â© Kaderovski
</div></footer><script>feather.replace()</script></div></body></html>